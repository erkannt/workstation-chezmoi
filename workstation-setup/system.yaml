- name: "System related stuff"
  hosts: localhost
  become: true

  tasks:
    - name: Install packages
      xbps:
        name: "{{ item }}"
        state: present
      loop:
        - bluez
        - cups
        - cups-filters
        - system-config-printer
        - net-tools
        - avahi
        - nss-mdns
        - void-repo-nonfree

    - name: Enable services
      runit:
        name: "{{ item }}"
        state: started
        enabled: yes
      loop:
        - cupsd
        - avahi-daemon
        - bluetoothd

    - name: make sure hff is added to certain groups
      user:
        name: hff
        groups: "{{ item }}"
        append: yes
      loop:
        - audio
        - video
        - plugdev
        - wheel
        - bluetooth
        - users
        - docker
        - lp
        - lpadmin
        - dialout
